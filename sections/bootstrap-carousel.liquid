<div id="homepage-carousel">
  <!-- The slideshow -->
  {% for block in section.blocks limit: 1 %}
    	<a href="{{block.settings.slide_url}}" class="slide-url temp-slide">
          <picture>
            <source media="(min-width: 769px)" {% render 'image-attributes', image: block.settings.desktop_image, sizes: '600,700,800,1000,1200,1400,1600,1800,2000,2200,2400,2600', ignore_src: true %}>
            <source media="(max-width: 768px)" {% render 'image-attributes', image: block.settings.mobile_image, sizes: '400,500,600,700,800,900,1000', crop: 'center', ignore_src: true %}>
            <img style="width: 100%;" class="image-overlay__image_" {% render 'image-attributes', image: block.settings.mobile_image, sizes: '600,700,800,1000,1200,1400,1600,1800,2000,2200,2400,2600' %} alt="{{block.settings.mobile_image.alt}}" />
          </picture>
        </a>
    {% endfor %}
  <div class="carousel-inner owl-carousel">
    {% for block in section.blocks %}
      <div class="carousel--item slide_{{forloop.index}}">
        {% if block.settings.show_timer %}
          {% render 'countdown-timer', title: "Special Offer Ends In", end_date: block.settings.end_date %}
        {% endif %}
        <span class="image_alt visually-hidden">{{ block.settings.desktop_image.alt | escape }}</span>
        <a href="{% if block.settings.slide_url != blank %}{{block.settings.slide_url}}{% else %}javascript:void(0){% endif %}" class="slide-url">
          <picture>
            <source media="(min-width: 769px)" {% render 'image-attributes', image: block.settings.desktop_image, sizes: '600,700,800,1000,1200,1400,1600,1800,2000,2200,2400,2600', ignore_src: true %}>
            <source media="(max-width: 768px)" {% render 'image-attributes', image: block.settings.mobile_image, sizes: '400,500,600,700,800,900,1000', crop: 'center', ignore_src: true %}>
            <img class="image-overlay__image_" {% render 'image-attributes', image: block.settings.mobile_image, sizes: '600,700,800,1000,1200,1400,1600,1800,2000,2200,2400,2600' %} alt="{{block.settings.mobile_image.alt}}" />
          </picture>

        </a>
    {%  if block.settings.splitbanner_buttons %}
<div style="top:0; bottom:0;" class="{% if block.settings.splitbanner_url %}col-12 row position-absolute w-100 p-0 {% else %}d-none{% endif %}">
<a style="width:100%;" class="col-6"
            href="{{block.settings.splitbanner_url}}" ></a>

<a style="width:100%;" class="col-6"
            href="{{block.settings.splitbanner_url2}}" ></a>
</div>
    {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
{% if section.settings.show_popup %}
<div id="saleModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body p-0">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="modal-body-content">
  {% if section.settings.popup_image  %}
          <div class="modal-image">
            <img loading="lazy" class="image-overlay__image_" {% render 'image-attributes', image: section.settings.popup_image, sizes: '600,700,800,1000,1200,1400,1600,1800,2000,2200,2400,2600' %} alt="Popup Image" />
          </div>
    {% endif %}
          <div class="modal-form p-3">
          	<div class="sale-pop-form">
            <div class="form-group" style="margin: 0;">
      {% if section.settings.show_splitpopup %}
        <div class="d-flex justify-content-center">
          <span>
<button type="button" id="btn1st" class="btn btn-primary">{{ section.settings.split_button }}</button>            
               </span>
                            Â <span>
<button type="button" id="btn2nd"  class="btn btn-info">{{ section.settings.split_buttontwo }}</button>
</span>
        </div>
<style>
 .myform{color:black;}       
 #myform, .modal-backdrop.show{display:none!important;}       
</style>        
    {% endif %}
              <div class="myform" id="myform" style="display: flex;margin: 0;justify-content: center;">
              	<input style="border-radius: 5px;max-width: 65%;font-size: 12px;width: 100%;" type="email" name="email" id="sale_email" placeholder="Email Address">
              <button style="border-radius: 5px;background: transparent;border:1px solid #ff0000;color: #fff;height:45px;line-height:normal;" class="button sale-btn" type="submit">{{ section.settings.button_text }}</button>
              </div>
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
      {% if section.settings.show_splitpopup %}
<div id="saleModals-1" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body p-0">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="modal-body-content">
          <div class="modal-form p-3">
          	<div class="sale-pop-form">
            <div class="form-groups-1" style="margin: 0;">
              <div class="myform" style="display: flex;margin: 0;justify-content: center;">
              	<input style="border-radius: 5px;max-width: 65%;font-size: 12px;width: 100%;" type="email" name="email" id="sale_emails-1" placeholder="Email Address">
              <button style="border-radius: 5px;background: transparent;border:1px solid #ff0000;color: #fff;height:45px;line-height:normal;" class="button sale-btns-1" type="submit">YES</button>
              </div>
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="saleModals-2" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body p-0">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="modal-body-content">
          <div class="modal-form p-3">
          	<div class="sale-pop-form">
            <div class="form-groups-2" style="margin: 0;">
              <div class="myform" style="display: flex;margin: 0;justify-content: center;">
              	<input style="border-radius: 5px;max-width: 65%;font-size: 12px;width: 100%;" type="email" name="email" id="sale_emails-2" placeholder="Email Address">
              <button style="border-radius: 5px;background: transparent;border:1px solid #ff0000;color: #fff;height:45px;line-height:normal;" class="button sale-btns-2" type="submit">YES</button>
              </div>
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
    {% endif %}
{% endif %}

<style>

  #homepage-carousel {position: relative;}
  .timer {
  	position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    z-index: 9;
    width: 100%;
  }
  #homepage-carousel .owl-next, #homepage-carousel .owl-prev {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 100%;
    text-align: center;
    opacity: .4;
    transition: all .4s ease-in-out;
    border: 0 !important;
  }
  #homepage-carousel .owl-next:hover, #homepage-carousel .owl-prev:hover {opacity: 1;}
  #homepage-carousel .owl-next {right: 0px;}
  #homepage-carousel .owl-prev {left: 0px;}
  #homepage-carousel .owl-next span, #homepage-carousel .owl-prev span {
  	line-height: 30px;
    font-size: 100px;
    position: relative;
    color: #ff0000;
  }
  #homepage-carousel .owl-dots {
  	display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    bottom: 20px;
    width: 100%;
    height: max-content;
  }
  #homepage-carousel button.owl-dot {
    width: 12px;
    height: 12px;
    background: #44444478!important;
    margin: 0 5px;
    border-radius: 50%!important;
 }
 #homepage-carousel button.owl-dot.active {
  background: #ccc!important;
 }
 
  @media screen and (max-width: 767px) {
    #homepage-carousel .owl-next, .owl-prev {display: none;}
    #homepage-carousel .owl-dots {position: static;margin-top: 10px;}
  }
  #saleModal {z-index: 9999;background: #0009;padding: 0 !important;}
  #saleModal .modal-dialog,  #saleModals-1 .modal-dialog, #saleModals-2 .modal-dialog{top: 20%;}
  #saleModal .close {
  	position: absolute;
    top: 0;
    right: 0;
    width: 30px;
    height: 30px;
    background: #EB1C24;
    color: #fff;
    line-height: 30px;
    font-weight: normal;
    opacity: 1;
    text-align: center;
    font-size: 30px !important;
  }
  #saleModal .close:focus {
  	border: 0;
    outline: none;
  }
  .error-msg-sale, .thankyou-msg-sale, .aluser-msg-sale {
  	text-align: center;
    margin: 0;
    font-size: 12px;
    color: #fff;
    opacity: .8;
  }
  .sale-btn:focus {outline: none;}
  #saleModal img {display:block;}
  #saleModal .modal-content {border:0;}
  .modal-form {background: #000;}
  #saleModal input {
  	border: 1px solid #ccc;
    background: transparent;
    color: #ccc;
    margin-right: 4px;
    padding: 0 12px;
/*     height: 45px; */
  }
  #saleModal input::-webkit-input-placeholder {color: #ccc;}
  #saleModal .sale-btn:hover {background: #EB1C24!important;}
  .modal {
    transform: translateY(0%);
  }
  @media screen and (max-width: 600px) {
  	#saleModal .modal-dialog,  #saleModals-1 .modal-dialog, #saleModals-2 .modal-dialog{top: 25%;}
  }
  @media screen and (min-width: 1100px) {
    #homepage-carousel .owl-dots{display:none;}
    #shopify-section-1478795901388 {margin-bottom: 20px}
  }
</style>

<script>
	$(document).ready(function(){
      var $owl = $( '.owl-carousel' );
      $owl.on('initialized.owl.carousel', function(event){ 
         $('.temp-slide').remove();
      });
      $(".owl-carousel").owlCarousel({
        items: 1,
        loop: true,
        nav: true,
        lazyLoad: true,
        autoplay: true,
        autoplayTimeout: 5000,
        merge: true,
        startPosition: 0,
        smartSpeed:500,
        animateOut: 'fadeOut',
    	animateIn: 'fadeIn',
        pullDrag: false,
        checkVisible: false,
        responsiveClass:true,
        autoplayHoverPause: true
      });
    });
  	const slides = document.querySelectorAll('.carousel-inner .carousel--item');
    slides.forEach((slide, i) => {
      slide.addEventListener('click', function() {
          let imageTitle = slide.querySelector('.image_alt').innerText;
          let slideNum = `${i+1}`
          clevertap.event.push("Homepage Banner clicked", {
            "Banner Number": 'Banner ' + slideNum,
            "Banner Title": imageTitle,
            "userSource": userSource
          })
      })
    });
  {% if section.settings.show_popup %}
    var slide_num = '{{ section.settings.banner_number}}';
    $(`.slide_${slide_num} a`).click(function(e){
        e.preventDefault();
        $("#saleModal").modal("show");
      });
        {% if customer %}
          document.getElementById("sale_email").value = '{{customer.email}}'
      {% endif %}
      {% if section.settings.show_splitpopup %} 
    $("#btn1st").click(function(e){
                $("#saleModal").modal("hide");
        // $(".modal-backdrop.show").css("display", "none");
        $("#saleModals-1").modal("show");
      });
        
      $(".sale-btns-1").click(function () {
      var e = document.getElementById("sale_emails-1").value;
      "" !== e && /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)
          ? localStorage.getItem("userEmailIdSale1") === e
              ? $(".form-groups-1").append('<p class="aluser-msg-sale">You are already subscribed!!</p>')
              : (localStorage.setItem("userEmailIdSale1", e),
                clevertap.onUserLogin.push({ Site: { Email: e, "MSG-email": !0 } }),
                clevertap.event.push("Notify Me {{ section.settings.clevertap_id }}", { Email: e, Source: "HomePage Banner Popup" }),
                $("#saleModals-1 .form-groups-1").append('<p class="thankyou-msg-sale">Thank You for subscribing!</p>'))
          : $(".form-groups-1").append('<p class="error-msg-sale">Please enter a valid email Id!</p>');
      setTimeout(function () {
          $(".error-msg-sale, .thankyou-msg-sale, .aluser-msg-sale").remove();
      }, 5e3);
  });
      $("#btn2nd").click(function(e){
             $("#saleModal").modal("hide");
                // $(".modal-backdrop.show").css("display", "none");
        $("#saleModals-2").modal("show");
      });
      $(".sale-btns-2").click(function () {
      var e = document.getElementById("sale_emails-2").value;
      "" !== e && /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)
          ? localStorage.getItem("userEmailIdSale2") === e
              ? $(".form-groups-2").append('<p class="aluser-msg-sale">You are already subscribed!!</p>')
              : (localStorage.setItem("userEmailIdSale2", e),
                clevertap.onUserLogin.push({ Site: { Email: e, "MSG-email": !0 } }),
                clevertap.event.push("Notify Me {{ section.settings.clevertap_split }}", { Email: e, Source: "HomePage Banner Popup" }),
                $("#saleModals-2 .form-groups-2").append('<p class="thankyou-msg-sale">Thank You for subscribing!</p>'))
          : $(".form-groups-2").append('<p class="error-msg-sale">Please enter a valid email Id!</p>');
      setTimeout(function () {
          $(".error-msg-sale, .thankyou-msg-sale, .aluser-msg-sale").remove();
      }, 5e3);
  });
{% else %}
        $(".sale-btn").click(function () {
      var e = document.getElementById("sale_email").value;
      "" !== e && /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)
          ? localStorage.getItem("userEmailIdSale") === e
              ? $(".form-group").append('<p class="aluser-msg-sale">You are already subscribed!!</p>')
              : (localStorage.setItem("userEmailIdSale", e),
                clevertap.onUserLogin.push({ Site: { Email: e, "MSG-email": !0 } }),
                clevertap.event.push("Notify Me {{ section.settings.clevertap_id }}", { Email: e, Source: "HomePage Banner Popup" }),
                $("#saleModal .form-group").append('<p class="thankyou-msg-sale">Thank You for subscribing!</p>'))
          : $(".form-group").append('<p class="error-msg-sale">Please enter a valid email Id!</p>');
      setTimeout(function () {
          $(".error-msg-sale, .thankyou-msg-sale, .aluser-msg-sale").remove();
      }, 5e3);
  });
 {% endif %}
 {% endif %}
</script>

{% schema %}
  {
    "name": "Bootstrap Slideshow",
	"class": "bootstrap-carousel",
	"max_blocks": 28,
    "settings": [
		{
          "type": "checkbox",
          "id": "show_popup",
          "label": "Enable popup on banner",
          "default": false
        },
		{
		  "type": "image_picker",
		  "id": "popup_image",
		  "label": "Popup Image"
		},
		{
          "type": "text",
          "id": "banner_number",
          "label": "Enter banner number on which you want to show popup"
        },
        {
		  "type": "text",
		  "id": "button_text",
		  "label": "button text"
		},
        {
          "type": "text",
          "id": "clevertap_id",
          "label": "clever tap event"
        },
        {
          "type": "checkbox",
          "id": "show_splitpopup",
          "label": "only for split products",
          "default": false
        },
                 {
          "type": "text",
          "id": "split_button",
          "label": "botton1 textsplit products",
           "default": "primary"
        },
                 {
          "type": "text",
          "id": "split_buttontwo",
          "label": "botton2 textsplit products",
          "default": "primary2"
        },
         {
          "type": "text",
          "id": "clevertap_split",
          "label": "clevertap event only for split products"
        }

	],
	"blocks": [
		{
          "name": "slideshow",
          "type": "slideshow",
          "settings": [
			{
			  "type": "image_picker",
			  "id": "desktop_image",
			  "label": "Desktop Image"
			},
			{
			  "type": "image_picker",
			  "id": "mobile_image",
			  "label": "Mobile Image"
			},
			{
			  "type": "url",
			  "id": "slide_url",
			  "label": "Slide URL"
			},
			{
              "type": "checkbox",
              "id": "show_timer",
              "label": "Show Timer on Banner",
              "default": false
            },
            {
              "type": "text",
              "id": "end_date",
              "label": "End Date (Ex: Apr 30, 2022)"
            },
          {
          "type": "checkbox",
          "id": "splitbanner_buttons",
          "label": "Enable splitbanner"
        },
		{
          "type": "url",
          "id": "splitbanner_url",
          "label": "Enter splitbanner_url"
        },
        		{
          "type": "url",
          "id": "splitbanner_url2",
          "label": "Enter splitbanner_url 2"
        }
		  ]
		}
	],
	"presets": [
		{
          "name": "Bootstrap Slideshow",
          "category": "image",
          "settings": {
          }
        }
	]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
