{%- if product.metafields.reviews.rating.value != blank -%}
  {%- assign rating_decimal = 0 -%}
  {%- assign decimal = product.metafields.reviews.rating.value.rating | modulo: 1 -%}

  {%- if decimal >= 0.3 and decimal <= 0.7 -%}
    {%- assign rating_decimal = 0.5 -%}
  {%- elsif decimal > 0.7 -%}
    {%- assign rating_decimal = 1 -%}
  {%- endif -%}
  <div class="rating">
    <div class="rating__stars" role="img" aria-label="{{ 'general.accessibility.star_reviews_info' | t: rating_value: product.metafields.reviews.rating.value, rating_max: product.metafields.reviews.rating.value.scale_max }}">
      {%- assign rating_as_float = product.metafields.reviews.rating.value.rating | times: 1.0 -%}
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 22 22">
          <g id="Group_334346" data-name="Group 334346" transform="translate(17150 -5434)">
            <rect id="Rectangle_114376" data-name="Rectangle 114376" width="22" height="22" transform="translate(-17150 5434)" fill="transparent"/>
            <g id="Group_334341" data-name="Group 334341" transform="translate(-17149 5435)">
              <path id="Path_332351" data-name="Path 332351" d="M1153.144,361.362a1.527,1.527,0,0,1,2.738,0l2.313,4.692,5.154.768a1.527,1.527,0,0,1,.848,2.6l-3.729,3.683.868,5.179a1.526,1.526,0,0,1-2.216,1.6l-4.606-2.424-4.607,2.424a1.526,1.526,0,0,1-2.216-1.6l.868-5.179-3.729-3.683a1.526,1.526,0,0,1,.848-2.6l5.154-.768Z" transform="translate(-1144.374 -360.511)" fill="#f4c730" fill-rule="evenodd"/>
            </g>
          </g>
          </svg>
      </span>
  {{ rating_as_float | round: 1 }}
    </div>
  {% comment %} <span class="rating__caption" {% if template contains 'product' %}style="font-size:12px!important;"{% endif %}>{{ 'product.general.reviews_count' | t: count: product.metafields.reviews.rating_count.value }}</span>
   info: ui2.0 remove the line below endcomment then remove comment if want to roll back to old cards ui
  {% endcomment %}
  {% comment %} {% if template contains 'product' %} <span class="rating__caption" style="font-size:12px!important;">{{ 'product.general.reviews_count' | t: count: product.metafields.reviews.rating_count.value }}</span> {% endif %} {% endcomment %}
  </div>
  {% else %}
    <div class="rating">
    <div class="rating__stars" role="img" >
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 22 22">
        <g id="Group_334346" data-name="Group 334346" transform="translate(17150 -5434)">
          <rect id="Rectangle_114376" data-name="Rectangle 114376" width="22" height="22" transform="translate(-17150 5434)" fill="transparent"/>
          <g id="Group_334341" data-name="Group 334341" transform="translate(-17149 5435)">
            <path id="Path_332351" data-name="Path 332351" d="M1153.144,361.362a1.527,1.527,0,0,1,2.738,0l2.313,4.692,5.154.768a1.527,1.527,0,0,1,.848,2.6l-3.729,3.683.868,5.179a1.526,1.526,0,0,1-2.216,1.6l-4.606-2.424-4.607,2.424a1.526,1.526,0,0,1-2.216-1.6l.868-5.179-3.729-3.683a1.526,1.526,0,0,1,.848-2.6l5.154-.768Z" transform="translate(-1144.374 -360.511)" fill="#f4c730" fill-rule="evenodd"/>
          </g>
        </g>
        </svg>
      </span>
       Be first to review
    </div>
  </div>
{%- endif -%}