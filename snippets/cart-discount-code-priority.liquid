<div class="custom_discount_filder_container">
  <div class="custom-discount-finder">
    <div class="discount-finder-header">
      <button type="button" class="discount-finder-close"
        onclick="document.querySelector('.custom_discount_filder_container').removeAttribute('open_finder');">
        <img src="https://cdn.shopify.com/s/files/1/0057/8938/4802/files/right_arrow_40x40.jpg"
          style="transform: rotate(180deg);">
      </button>
      <h2 class="custom-discount-finder-heading">Offers for you</h2>
    </div>
    <div class="discount_finder_coupon_holder">
      <div class="finder_discountCode_txtbx_holder">
        <input type="text" autocomplete="off" spellcheck="false" maxlength="120" placeholder="Type coupon code here"
          value="" onkeyup id="af_kd_custom_coupon_text" class="afcd_coupon-inputtext af_custom_coupon_text">
      </div>
      <div class="discount_finder_btn_holder">
        <button type="button" id="af_kd_custom_apply_coupon_trigger"
          class="discount_finder_apply_btn af_kd_df_apply_coupon_btn af_custom_apply_coupon_trigger"
          onclick="Shopify.DiscountSubmit()">
          <af class="af_after_loading">Apply</af>
        </button>
      </div>
    </div>
    <div class="discount_finder_header_field_details">
      <div id="af_kd_tagged_discounts" class="af_tagged_discounts"></div>
      <p id="af_kd_discount_response" class="af_discount_response af_stacked_response" style="text-align:left;"></p>
      <input type="hidden" name="discount" class="af_HiddenDiscount" value="">
      <div class="afcd_coupon_error"></div>
    </div>
    <div class="discount_finder_body">
      {%  assign kart_counter = 0 %}
      {% for block in section.blocks %}
      {% case block.type %}
      {% when 'cart-offer' %}
      {% if block.settings.code != blank %}
      {% assign kart_active_code = false %}
      {% assign tag_based_coupon = false %}
      {% assign paytm_tag = false %}
      {% assign smartWatch_coln = false %}
      {% if block.settings.cart_discount_type == 'tag' or block.settings.cart_discount_type == 'collection' or block.settings.cart_discount_type == 'tag_with_qty' or block.settings.cart_discount_type == 'collection_with_qty' %}
      {% for line_item in cart.items %}
      {% if block.settings.cart_discount_type == 'tag' or block.settings.cart_discount_type == 'tag_with_qty' %}
      {% if line_item.product.tags contains block.settings.cart_product_tag %}
      {% assign tag_based_coupon = true %}
      {% endif %}
      {% endif %}
      {% if block.settings.cart_discount_type == 'collection' or block.settings.cart_discount_type == 'collection_with_qty' %}
      {% for collection in line_item.product.collections %}
      {% if collection.title == block.settings.cart_collection %}
      {% assign smartWatch_coln = true %}
      {% endif %}
      {% endfor %}
      {% endif %}
      {% endfor %}
      {% endif %}
      {% if cart.item_count >= block.settings.cart_qty and tag_based_coupon and block.settings.cart_discount_type == 'tag_with_qty' %}
      {% assign kart_active_code = true %}
      {% elsif cart.item_count >= block.settings.cart_qty and smartWatch_coln and block.settings.cart_discount_type == 'collection_with_qty' %}
      {% assign kart_active_code = true %}
      {% elsif cart.item_count >= block.settings.cart_qty and block.settings.cart_discount_type == 'qty' %}
      {% assign kart_active_code = true %}
      {% elsif tag_based_coupon and block.settings.cart_discount_type == 'tag' %}
      {% assign kart_active_code = true %}
      {% elsif cart.total_price >= block.settings.cart_min_price and block.settings.cart_discount_type == 'price' %}
      {% assign kart_active_code = true %}
      {% endif %}

      {% if kart_active_code and kart_counter == 0 %}
      {% assign first_kart_active_code = block.settings.code %}
      {% assign first_kart_code_heading = block.settings.heading %}
      {%  assign kart_counter = kart_counter | plus: 1 %}
      {% endif %}

      <div class="discount_finder_item {% if kart_active_code %} active_discount {% endif %}">
        <div class="discount_finder_item_details">
          <div class="discount_finder_item_icon">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="22.472"
              height="23.348" viewBox="0 0 22.472 23.348">
              <defs>
                <clipPath id="clip-path">
                  <rect id="Rectangle_116108" data-name="Rectangle 116108" width="22.472" height="23.348" fill="none" />
                </clipPath>
              </defs>
              <g id="Group_337143" data-name="Group 337143" transform="translate(0 0)">
                <g id="Group_337142" data-name="Group 337142" transform="translate(0 0)" clip-path="url(#clip-path)">
                  <path id="Path_346390" data-name="Path 346390"
                    d="M21.657,12.326a1.261,1.261,0,0,1,0-1.306l.41-.667a2.747,2.747,0,0,0-1.29-3.973l-.724-.3a1.245,1.245,0,0,1-.769-1.059l-.06-.785a2.757,2.757,0,0,0-3.38-2.457l-.764.181a1.255,1.255,0,0,1-1.244-.4l-.506-.6a2.747,2.747,0,0,0-4.18,0l-.511.6a1.253,1.253,0,0,1-1.245.4l-.764-.181a2.757,2.757,0,0,0-3.38,2.457l-.06.785A1.246,1.246,0,0,1,2.42,6.078l-.724.3A2.748,2.748,0,0,0,.4,10.352l.41.667a1.261,1.261,0,0,1,0,1.306L.4,13a2.75,2.75,0,0,0,1.29,3.974l.724.3a1.241,1.241,0,0,1,.769,1.052l.06.785a2.749,2.749,0,0,0,3.38,2.454l.764-.181a1.267,1.267,0,0,1,1.245.4l.511.6a2.752,2.752,0,0,0,4.179,0l.506-.6a1.267,1.267,0,0,1,1.244-.4l.764.181a2.749,2.749,0,0,0,3.38-2.454l.06-.785a1.241,1.241,0,0,1,.769-1.051l.724-.3a2.72,2.72,0,0,0,.38-.194A2.749,2.749,0,0,0,22.066,13ZM7.382,9.18v0a1,1,0,1,1,1,1,1,1,0,0,1-1-1M8.764,15.2a.728.728,0,0,1-.527.219A.747.747,0,0,1,7.7,14.153l0,0,6-6a.749.749,0,0,1,1.086,1.031l-.028.028Zm5.622-.031a1,1,0,0,1-1-.992v-.007a1,1,0,1,1,1,1"
                    transform="translate(0 0)" fill="#1a2024" />
                </g>
              </g>
            </svg>
          </div>
          <div class="discount_finder_item_content">
            <h6>{{- block.settings.heading -}}</h6>
            <div class="discount_finder_view_products_container">
              <span>{{- block.settings.code -}}</span>
              {% if block.settings.link != blank %}
              <a href="{{- block.settings.link -}}" class="discount_finder_view_product">View Products</a>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="discount_finder_item_cta_btn">
          <button type="button" onclick="CDSetupInit.applyDiscount('{{- block.settings.code -}}')"
            class="discount_cta_btn {{ block.settings.code }}" {% unless kart_active_code %} disabled {% endunless
            %}></span>Tap To Apply</span></button>
        </div>
      </div>
      {% endif %}
      {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

<div class="discount_coupon_field_container">
  <div id="af_cart_page" class="cdThemeSetupV2">
    <div class="af_cd_setup custom_kartdiscount_container {% if first_kart_active_code %}discount_applied discount_added{% endif %}" data-finder="false" {% if first_kart_active_code %} couponCode="true" {% endif %}>
      <div style="display: flex;flex-direction:row;align-items: flex-start;" class="af_txtbtn_holder">
        <div class="af_txtbx_holder discountCode_txtbx_holder">
          <div class="discountCode_details_container {% if first_kart_active_code %}show{% endif %}">
            <div class="discountCode_details_inner_container"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="22.472" height="23.348" viewBox="0 0 22.472 23.348">
            <defs>
              <clipPath id="clip-path">
                <rect id="Rectangle_116108" data-name="Rectangle 116108" width="22.472" height="23.348" fill="none"></rect>
              </clipPath>
            </defs>
            <g id="Group_337143" data-name="Group 337143" transform="translate(0 0)">
              <g id="Group_337142" data-name="Group 337142" transform="translate(0 0)" clip-path="url(#clip-path)">
                <path id="Path_346390" data-name="Path 346390" d="M21.657,12.326a1.261,1.261,0,0,1,0-1.306l.41-.667a2.747,2.747,0,0,0-1.29-3.973l-.724-.3a1.245,1.245,0,0,1-.769-1.059l-.06-.785a2.757,2.757,0,0,0-3.38-2.457l-.764.181a1.255,1.255,0,0,1-1.244-.4l-.506-.6a2.747,2.747,0,0,0-4.18,0l-.511.6a1.253,1.253,0,0,1-1.245.4l-.764-.181a2.757,2.757,0,0,0-3.38,2.457l-.06.785A1.246,1.246,0,0,1,2.42,6.078l-.724.3A2.748,2.748,0,0,0,.4,10.352l.41.667a1.261,1.261,0,0,1,0,1.306L.4,13a2.75,2.75,0,0,0,1.29,3.974l.724.3a1.241,1.241,0,0,1,.769,1.052l.06.785a2.749,2.749,0,0,0,3.38,2.454l.764-.181a1.267,1.267,0,0,1,1.245.4l.511.6a2.752,2.752,0,0,0,4.179,0l.506-.6a1.267,1.267,0,0,1,1.244-.4l.764.181a2.749,2.749,0,0,0,3.38-2.454l.06-.785a1.241,1.241,0,0,1,.769-1.051l.724-.3a2.72,2.72,0,0,0,.38-.194A2.749,2.749,0,0,0,22.066,13ZM7.382,9.18v0a1,1,0,1,1,1,1,1,1,0,0,1-1-1M8.764,15.2a.728.728,0,0,1-.527.219A.747.747,0,0,1,7.7,14.153l0,0,6-6a.749.749,0,0,1,1.086,1.031l-.028.028Zm5.622-.031a1,1,0,0,1-1-.992v-.007a1,1,0,1,1,1,1" transform="translate(0 0)" fill="#1a2024"></path>
              </g>
            </g>
        </svg><p class="discountCode_details">{% if first_kart_code_heading %} {{ first_kart_code_heading }} {% endif %}</p></div>
            <span class="discountCode">Code: <span class="af_coupon_text af_coupon_code">{{ first_kart_active_code }}</span></span>
          </div>
          <input type="hidden" autocomplete="off" spellcheck="false" maxlength="120" placeholder="Coupon" id="af_custom_coupon_text" value="{{ first_kart_active_code }}" class="af_custom_coupon_text input-full trbrbr0" style="margin: 0px; width: 100%; max-height: 42px; min-height: 42px; border-color: rgb(204, 204, 204);">
        </div>
        <div class="af_btn_holder">
          <button type="button" class="af_custom_apply_coupon_trigger btn btn--regular btn--color btn--fill tlblbr0" id="af_custom_apply_coupon_trigger" onclick="CDSetupInit.couponApplyClick(this)" style="margin:0;width:100%;max-height:42px;min-height:42px;padding: 8px 31px;">
            <af class="af_after_loading">Apply</af>
          </button>
        </div>
      </div>
      <div class=" af_popup_trigger ">
        <span class="af_popup_loading">
          <span class="af_loading_dots">
            <span class="af_loading_dots__dot"></span>
            <span class="af_loading_dots__dot"></span>
            <span class="af_loading_dots__dot"></span>
          </span>
        </span>
        <span class="af_opens_popup custom_discount_finder_btn">
        <span class="discount_finder_viewAll">View all coupons  &rarr;</span>
        </span>
      </div>
      <div class="discount_finder_offer_icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="22.472" height="23.348" viewBox="0 0 22.472 23.348">
          <defs>
            <clipPath id="clip-path">
              <rect id="Rectangle_116108" data-name="Rectangle 116108" width="22.472" height="23.348" fill="none"></rect>
            </clipPath>
          </defs>
          <g id="Group_337143" data-name="Group 337143" transform="translate(0 0)">
            <g id="Group_337142" data-name="Group 337142" transform="translate(0 0)" clip-path="url(#clip-path)">
              <path id="Path_346390" data-name="Path 346390" d="M21.657,12.326a1.261,1.261,0,0,1,0-1.306l.41-.667a2.747,2.747,0,0,0-1.29-3.973l-.724-.3a1.245,1.245,0,0,1-.769-1.059l-.06-.785a2.757,2.757,0,0,0-3.38-2.457l-.764.181a1.255,1.255,0,0,1-1.244-.4l-.506-.6a2.747,2.747,0,0,0-4.18,0l-.511.6a1.253,1.253,0,0,1-1.245.4l-.764-.181a2.757,2.757,0,0,0-3.38,2.457l-.06.785A1.246,1.246,0,0,1,2.42,6.078l-.724.3A2.748,2.748,0,0,0,.4,10.352l.41.667a1.261,1.261,0,0,1,0,1.306L.4,13a2.75,2.75,0,0,0,1.29,3.974l.724.3a1.241,1.241,0,0,1,.769,1.052l.06.785a2.749,2.749,0,0,0,3.38,2.454l.764-.181a1.267,1.267,0,0,1,1.245.4l.511.6a2.752,2.752,0,0,0,4.179,0l.506-.6a1.267,1.267,0,0,1,1.244-.4l.764.181a2.749,2.749,0,0,0,3.38-2.454l.06-.785a1.241,1.241,0,0,1,.769-1.051l.724-.3a2.72,2.72,0,0,0,.38-.194A2.749,2.749,0,0,0,22.066,13ZM7.382,9.18v0a1,1,0,1,1,1,1,1,1,0,0,1-1-1M8.764,15.2a.728.728,0,0,1-.527.219A.747.747,0,0,1,7.7,14.153l0,0,6-6a.749.749,0,0,1,1.086,1.031l-.028.028Zm5.622-.031a1,1,0,0,1-1-.992v-.007a1,1,0,1,1,1,1" transform="translate(0 0)" fill="#1a2024"></path>
            </g>
          </g>
        </svg>
      </div>
    </div>
    <div id="af_tagged_discounts" class="af_tagged_discounts">
    <div class="af_tag ">
      <span class="af_coupon_wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18">
          <path d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z" fill-opacity=".55"></path>
          <path fill-opacity=".25" d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z"></path>
        </svg>
      </span>
      <div class="af_coupon_text_wrapper">
        <div class="af_coupon_text_amount">
          <span class="af_coupon_text af_coupon_code">FLAT5</span>
          <span class="af_coupon_text af_discount_amt">- <span class="af_money" data-current-currency="THB">
              <span class="">฿ 26,95</span>
            </span>
          </span>
        </div>
      </div>
      <div class="removeAfTag" onclick="CDSetupInit.removeIndividualCoupon('FLAT5',this)">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13">
          <path d="M1.5 1.5l10.05 10.05M11.5 1.5L1.45 11.55" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round"></path>
        </svg>
      </div>
    </div>
  </div>
    <dv class="discount_error"></dv>
    <input class="afHiddenDiscount" name="discount" type="hidden" value="">
  </div>
</div>