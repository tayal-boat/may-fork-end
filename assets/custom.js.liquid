{% comment %}
/**
 * DEVELOPER DOCUMENTATION
 *
 * Include your custom JavaScript here.
 *
 * The theme Focal has been developed to be easily extensible through the usage of a lot of different JavaScript
 * events, as well as the usage of custom elements (https://developers.google.com/web/fundamentals/web-components/customelements)
 * to easily extend the theme and re-use the theme infrastructure for your own code.
 *
 * The technical documentation is summarized here.
 *
 * ------------------------------------------------------------------------------------------------------------
 * BEING NOTIFIED WHEN A VARIANT HAS CHANGED
 * ------------------------------------------------------------------------------------------------------------
 *
 * This event is fired whenever a the user has changed the variant in a selector. The target get you the form
 * that triggered this event.
 *
 * Example:
 *
 * document.addEventListener('variant:changed', function(event) {
 *   let variant = event.detail.variant; // Gives you access to the whole variant details
 *   let form = event.target;
 * });
 *
 * ------------------------------------------------------------------------------------------------------------
 * MANUALLY CHANGE A VARIANT
 * ------------------------------------------------------------------------------------------------------------
 *
 * You may want to manually change the variant, and let the theme automatically adjust all the selectors. To do
 * that, you can get the DOM element of type "<product-variants>", and call the selectVariant method on it with
 * the variant ID.
 *
 * Example:
 *
 * const productVariantElement = document.querySelector('product-variants');
 * productVariantElement.selectVariant(12345);
 *
 * ------------------------------------------------------------------------------------------------------------
 * BEING NOTIFIED WHEN A NEW VARIANT IS ADDED TO THE CART
 * ------------------------------------------------------------------------------------------------------------
 *
 * This event is fired whenever a variant is added to the cart through a form selector (product page, quick
 * view...). This event DOES NOT include any change done through the cart on an existing variant. For that,
 * please refer to the "cart:updated" event.
 *
 * Example:
 *
 * document.addEventListener('variant:added', function(event) {
 *   var variant = event.detail.variant; // Get the variant that was added
 * });
 *
 * ------------------------------------------------------------------------------------------------------------
 * BEING NOTIFIED WHEN THE CART CONTENT HAS CHANGED
 * ------------------------------------------------------------------------------------------------------------
 *
 * This event is fired whenever the cart content has changed (if the quantity of a variant has changed, if a variant
 * has been removed, if the note has changed...). This event will also be emitted when a new variant has been
 * added (so you will receive both "variant:added" and "cart:updated"). Contrary to the variant:added event,
 * this event will give you the complete details of the cart.
 *
 * Example:
 *
 * document.addEventListener('cart:updated', function(event) {
 *   var cart = event.detail.cart; // Get the updated content of the cart
 * });
 *
 * ------------------------------------------------------------------------------------------------------------
 * REFRESH THE CART/MINI-CART
 * ------------------------------------------------------------------------------------------------------------
 *
 * If you are adding variants to the cart and would like to instruct the theme to re-render the cart, you cart
 * send the cart:refresh event, as shown below:
 *
 * document.documentElement.dispatchEvent(new CustomEvent('cart:refresh', {
 *   bubbles: true
 * }));
 *
 * ------------------------------------------------------------------------------------------------------------
 * USAGE OF CUSTOM ELEMENTS
 * ------------------------------------------------------------------------------------------------------------
 *
 * Our theme makes extensive use of HTML custom elements. Custom elements are an awesome way to extend HTML
 * by creating new elements that carry their own JavaScript for adding new behavior. The theme uses a large
 * number of custom elements, but the two most useful are drawer and popover. Each of those components add
 * a "open" attribute that you can toggle on and off. For instance, let's say you would like to open the cart
 * drawer, whose id is "mini-cart", you simply need to retrieve it and set its "open" attribute to true (or
 * false to close it):
 *
 * document.getElementById('mini-cart').open = true;
 *
 * Thanks to the power of custom elements, the theme will take care automagically of trapping focus, maintaining
 * proper accessibility attributes...
 *
 * If you would like to create your own drawer, you can re-use the <drawer-content> content. Here is a simple
 * example:
 *
 * // Make sure you add "aria-controls", "aria-expanded" and "is" HTML attributes to your button:
 * <button type="button" is="toggle-button" aria-controls="id-of-drawer" aria-expanded="false">Open drawer</button>
 *
 * <drawer-content id="id-of-drawer">
 *   Your content
 * </drawer-content>
 *
 * The nice thing with custom elements is that you do not actually need to instantiate JavaScript yourself: this
 * is done automatically as soon as the element is inserted to the DOM.
 *
 * ------------------------------------------------------------------------------------------------------------
 * THEME DEPENDENCIES
 * ------------------------------------------------------------------------------------------------------------
 *
 * While the theme tries to keep outside dependencies as small as possible, the theme still uses third-party code
 * to power some of its features. Here is the list of all dependencies:
 *
 * "vendor.js":
 *
 * The vendor.js contains required dependencies. This file is loaded in parallel of the theme file.
 *
 * - custom-elements polyfill (used for built-in elements on Safari - v1.0.0): https://github.com/ungap/custom-elements
 * - web-animations-polyfill (used for polyfilling WebAnimations on Safari 12, this polyfill will be removed in 1 year - v2.3.2): https://github.com/web-animations/web-animations-js
 * - instant-page (v5.1.0): https://github.com/instantpage/instant.page
 * - tocca (v2.0.9); https://github.com/GianlucaGuarini/Tocca.js/
 * - seamless-scroll-polyfill (v2.0.0): https://github.com/magic-akari/seamless-scroll-polyfill
 *
 * "flickity.js": v2.2.0 (with the "fade" package). Flickity is only loaded on demand if there is a product image
 * carousel on the page. Otherwise it is not loaded.
 *
 * "photoswipe": v4.1.3. PhotoSwipe is only loaded on demand to power the zoom feature on product page. If the zoom
 * feature is disabled, then this script is never loaded.
 */

/*
 * ------------------------------------------------------------------------------------------------------------
 * CLEVERTAP EVENTS
 * ------------------------------------------------------------------------------------------------------------
 *
 */
{% endcomment %}

Shopify.enable_namagoo = {{ settings.enable_namagoo }};


var userSource="";function quickATC(){let e=$(".quick-buy-product__info").find(".product-item-meta__title").text(),t=$(".quick-buy-product__info").find(".price--highlight").text().split("price")[1];var i=$(".color-swatch__radio:checked").val();clevertap.event.push("Added to Cart",{"Product Name":e+" - "+i,Amount:t,Quantity:1,source:"Quick View Drawer",userSource:userSource}),clevertap.profile.push({Site:{"A2C Product Name":e+" - "+i,"A2C Amount":t,"A2C Quantity":1}}),setTimeout(function(){$(".drawer--quick-buy").attr("open",!1),$(".header__cart").attr("aria-expanded",!0)},1200)}userSource=navigator.userAgent.includes("Mobile")?"Mobile":navigator.userAgent.includes("iPad")?"Tablet":"Desktop",$(".featured-collections").on("click",function(){let e=$(this).siblings(".section__header").find('.tabs-nav__item[aria-expanded="true"]').text();clevertap.event.push("Homepage Cards section clicked",{userSource:userSource,"secttion Title":e})}),$(".product-item__quick-form").on("click",function(){let e=$(this).parents(".product-item__image-wrapper").siblings(".product-item__info").find(".product-item-meta__title").text(),t=$(this).parents(".product-item__image-wrapper").siblings(".product-item__info").find(".price--highlight").text().split("price")[1];clevertap.event.push("Quick Buy Clicked",{"Product Title":e,Price:t,userSource:userSource})}),$(".gokwik-checkout").click(function(){clevertap.event.push("GoKwik Button Clicked")}),$("#mini-cart-form").submit(function(){var e=$(".cart-total").val(),t="",i=[];$("#mini-cart .line-item").each(function(e,n){var o=$(this).find(".product-item-meta__title").text(),r=$(this).find(".product-item-meta__title").attr("data-product_id"),c=$(this).find(".price--highlight").text().split("price")[1],a=$(this).find(".product-item-meta__title").attr("data-product_type"),l=$(this).find(".quantity-selector__input").val();t=0==e?o:t+","+o,i.push({item_name:o,item_id:r,price:c,item_category:a,quantity:l})}),clevertap.event.push("Checkout Button Clicked",{Amount:e,"Product Name":t}),dataLayer.push({ecommerce:null}),dataLayer.push({event:"begin_checkout",ecommerce:{items:i}})}),$(".footer__item-content .linklist__item").each(function(){$(this).on("click",function(){let e=$(this).text().trim();clevertap.event.push("Footer Menu Item Clicked",{Item:e,Source:"Footer"})})}),$(".header__inline-navigation .header__linklist-item").each(function(){$(this).on("click",function(){let e=$(this).text().trim();clevertap.event.push("Header Menu Item Clicked",{Item:e,Source:"Header Desktop"})})}),$(".header__inline-navigation").click(function(){clevertap.event.push("Hamburger Menu Clicked")}),$('a[aria-controls="mini-cart"]').click(function(){clevertap.event.push("Slider Cart Opened",{Source:"Header"})}),window.matchMedia("(max-width: 767px)").matches&&($(".footer__item-title").append('\n  <span class="expanded toggle">+</span>\n  <span class="collapsed visually-hidden toggle">-</span>\n  '),$(".footer__item--links").click(function(){$(this).find(".footer__item-content").slideToggle(),$(this).find("span.toggle").toggleClass("visually-hidden")})),$(".myDropdown .toggle-link").click(function(){$(".myDropdown .dropdown-menu").removeClass("visually-hidden")}),$(".myDropdown .close-popup").click(function(){$(".myDropdown .dropdown-menu").addClass("visually-hidden")}),$(document).click(function(e){e.stopPropagation(),0===$(".myDropdown").has(e.target).length&&$(".dropdown-menu").addClass("visually-hidden")}),$(".mobile-nav  .mobile-nav__item").each(function(){$(this).on("click",function(){let e=$(this).text().trim();clevertap.event.push("Header Menu Item Clicked",{Item:e,Source:"Header Mobile"})})});let currentURL=location.href,cartStr="/cart",cartHashStr="/#cart";-1!=currentURL.indexOf(cartStr)&&(location.href="https://www.boat-lifestyle.com/#cart"),-1!=currentURL.indexOf(cartHashStr)&&$(".header__cart").attr("aria-expanded",!0),
$("button.press-list__logo-item.tap-area").hover(function(){$(this).trigger("click")}),$(".product-item").each(function(){$(this).find(".meta-label-new-arrival").length&&$(this).find(".lowest-price ").remove()}),$(document).ready(function(){function e(e,t){let i=(e=e[t]).getAttribute("data-price");i=parseInt(i);let n=e.parentElement.className;if(Shopify.enable_namagoo&&n.includes("custom-product-card_namogoo")&&localStorage.getItem("Namogoo")){let o=i/100*JSON.parse(localStorage.getItem("Namogoo")).discountValue,r=e.nextElementSibling.getAttribute("data-compare-price"),c=r-(i-=o),a=Math.round(100*c/r),l=e.offsetParent.children[0],u=e.parentElement.nextElementSibling;l.className.includes("custom-saved-price-lable")&&(l.innerHTML="You Save "+a+"%"),u.className.includes("custom-save-price")&&(u.innerHTML="You Save: "+Shopify.formatMoney(c,Shopify.money_format)+" ("+a+"%) "),e.className.includes("product-card-price-varies")?e.innerHTML="From "+Shopify.formatMoney(i,Shopify.money_format):e.innerHTML=Shopify.formatMoney(i,Shopify.money_format)}}if(Shopify.enable_flash_sale||Shopify.enable_namagoo){let t=$(".product-card-price");for(let i=0;i<t.length;i++)e(t,i)}});
$(document).on("click", ".custom-search-cta", function(e) {
  e.preventDefault();
  var t = $(this).parents("form").serialize();
  $.ajax({
      url: "/cart/add.js",
      dataType: "json",
      cache: !1,
      type: "post",
      data: t,
      success: function(e) {
          document.documentElement.dispatchEvent(new CustomEvent("cart:refresh", {
              bubbles: !0
          })), document.getElementById("mini-cart").open = !0, document.querySelector("body").classList.add("noScroll"), $(".search-clear-icon").css('display', 'flex'), setTimeout(function() {
              $(".header__cart-count").html($("#mini-cart input.cart--count").val());
              $('.header__cart-count.header__cart-count--floating.bubble-count').text($("#mini-cart input.cart--count").val());
              cart_bubble();
          }, 1500)
      }
  })
});

window.addEventListener("load", function() {
  function e() {
      "false" == sessionStorage.getItem("lazyloaded_sections") && ($.ajax({
          url: "/pages/custom-homepage",
          type: "GET",
          dataType: "html",
          success: function(e) {
              let t = $(e).find("#index-lazyload_sections").html();
              $(".custom-lazyloaded-content").html(t);
              Shopify.homepageLazyload();
          }
      }), sessionStorage.setItem("lazyloaded_sections", "true"))
  }
  sessionStorage.setItem("lazyloaded_sections", "false"), document.addEventListener("touchmove", e, !0), document.addEventListener("scroll", e, !0)
});

function isIOSMobile() {
  return /iPhone|iPad|iPod/i.test(navigator.userAgent)
};

if (!isIOSMobile()) {
  let i = Notification.permission;

  function e() {
      if ("visible" !== document.visibilityState) {
          icon = "image-url";
          var i = new Notification("Title", {
              body: "Message to be displayed",
              icon
          });
          i.onclick = () => {
              i.close(), window.parent.focus()
          }
      }
  }

  function t() {
    Notification.requestPermission(function(i) {
      "granted" === i && (clevertap.profile.push({
        Site: {
          "Web Push": !0,
          "MSG-push": !0
        }
      }), e(), console.log("granted"))
    })
  }
  "granted" === i ? e() : t()
};

// var actualDimension = $(window).width() + $(window).height();
// $(window).on('resize', function(){
//   if($(window).width() + $(window).height() < actualDimension) {
//     $('.fixed_nav.fixed_nav_mobile').css('position','relative')
//   } else {
//     $('.fixed_nav.fixed_nav_mobile').removeAttr('style')
//   }
// });

let unitsLeft = '';
let usual_price = '';

Shopify.variantChange = function(e){
  $('.pdp-btn-price').remove()
  $("#AddToCart .loader-button__text, .cutomized-btn .loader-button__text").append(`<span class="pdp-btn-price">₹${e.price / 100}</span>`)
  // console.log(e);

function swatches_change(varient_swatches_input){
for (let i = 0; i < varient_swatches_input.length; i++) {
if(varient_swatches_input[i].checked){
  if(JSON.parse(varient_swatches_input[i].parentElement.dataset.varient_disabled)) {
      $('.custom-notify-btn').show();
      $('.product__info button#AddToCart').hide();
      $('#AddToCart, .cutomized-btn, .button.custom-prebook').addClass('hide_cTA');
      $("#gokwik-buy-now").addClass('hide_cTA');
      $('quick-buy-drawer #AddToCart').hide();
      $('quick-buy-popover #AddToCart').hide();
      $('.product-item__quick-form.quick-buy-notify-me').show();
      $('.product-item__quick-form.quick-buy-notify-me .BIS_trigger').attr('data-variant-id',e.id);
      $('.d-lg-none.current-in-cart, .desktop.current-in-cart, .offer-callout-simple, .popup_wrapper').hide();
    $('.d-lg-none.restocking, .desktop.restocking').show();
    if($('#BIS_trigger.custom-notify-btn').length > 0){
      $('#BIS_trigger.custom-notify-btn').attr('data-variant-id',e.id);
    } 
      
  }else{
    $('.custom-notify-btn').hide();
    $('.product__info button#AddToCart').show();
    $("#gokwik-buy-now").removeClass('hide_cTA');
    $('#AddToCart, .cutomized-btn, .button.custom-prebook').removeClass('hide_cTA');
    $('quick-buy-drawer #AddToCart').show();
    $('quick-buy-popover #AddToCart').show();
    $('.product-item__quick-form.quick-buy-notify-me').hide();
    $('.d-lg-none.current-in-cart, .desktop.current-in-cart, .offer-callout-simple, .popup_wrapper').show();
    $('.d-lg-none.restocking, .desktop.restocking').hide();
    var variant_personalization = sessionStorage.getItem('variant_personalization');
    variant_personalization = JSON.parse(variant_personalization);
    for (var key in variant_personalization) {
      if (variant_personalization.hasOwnProperty(e.id)) {
        $('.personalization-image-wrapper img').attr('src', variant_personalization[e.id]);
        break;
      }
    }
  }    
}
}
}
let varient_swatches_input = document.querySelectorAll('.variant-swatch input') ;
swatches_change(varient_swatches_input);
let color_swatches_input = document.querySelectorAll('.color-swatch input') ;
swatches_change(color_swatches_input)

let home_pod_price = document.querySelector('.custom-product-of-the-day-price .current_price');
if(home_pod_price){
let custom_price = '';
let offerVariantdata = sessionStorage.getItem('variantQtys');
let OfferProperty= [];
let varient_pod_units = [];
offerVariantdata = JSON.parse(offerVariantdata);
for (var key in offerVariantdata) {
  if (offerVariantdata.hasOwnProperty(e.id)) {
   let OfferPropertyArr = offerVariantdata[e.id];
    OfferProperty.push(OfferPropertyArr[0]['pod_deal_applicability']);
    varient_pod_units.push(OfferPropertyArr[0]['pod_units']);
    break;
   }
 }
 let varient_pod_unit = varient_pod_units[0];
 varient_pod_unit = parseInt(varient_pod_unit);
 OfferProperty = OfferProperty[0];
 if(varient_pod_unit > 0 && OfferProperty == 'true'){  
  custom_price = parseInt(home_pod_price.dataset.pod)
 }else{
  custom_price = e.price / 100;
 }

  home_pod_price.innerHTML = '₹ '+ custom_price;
}
}


// Creating cleverTap push event
function createCleverTapEvent( event_name, event_data ){
  if( event_name != '' && event_data != '' ){
    clevertap.event.push( event_name, event_data );
  }
}




// Owl slider 
// Note : Need to add custom_slider_init class , section_id , carousel-js snippet and schema to activate owl carosal in a section

$("#homepage-carousel .custom_slider_init").on('initialized.owl.carousel', async () => {
  $("#homepage-carousel .owl-item img").each(function(){$(this).css({"width":"100%"});$(this).removeClass("ml-3") })
})


let section_id = '';
let sliderSelector = document.querySelectorAll('.custom_slider_init');
for (let i = 0; i < sliderSelector.length; i++) {
  section_id = sliderSelector[i].getAttribute('data-sliderId');
  let slider_section_id = '.custom_slider_init.' + section_id;
  $(slider_section_id).owlCarousel({
    loop: JSON.parse(sliderSelector[i].getAttribute('data-loop')),
    responsiveClass: JSON.parse(sliderSelector[i].getAttribute('data-responsiveClass')),
    autoplay: JSON.parse(sliderSelector[i].getAttribute('data-autoplay')),
    autoplayTimeout: JSON.parse(sliderSelector[i].getAttribute('data-autoplay-timeout')),
    autoplayHoverPause:true,
    stopOnHover: true,
    items: JSON.parse(sliderSelector[i].getAttribute('data-items')),
    slideBy: JSON.parse(sliderSelector[i].getAttribute('data-slideBy')),
    nav: true,
    dots: JSON.parse(sliderSelector[i].getAttribute('data-dots')),
    margin: JSON.parse(sliderSelector[i].getAttribute('data-margin')),
    center: JSON.parse(sliderSelector[i].getAttribute('data-center_slide')),
    responsive: {
        300: {
            items: JSON.parse(sliderSelector[i].getAttribute('data-responsive_Small_items')),
            dots: JSON.parse(sliderSelector[i].getAttribute('data-responsive_Small_dots')),
            rows: 2
        },
        1024: {
           items: JSON.parse(sliderSelector[i].getAttribute('data-responsive_mid_items')),
           rows: 2
        }
    },onInitialized: startProgressBar,onTranslate: resetProgressBar,onTranslated: startProgressBar
  }).on("dragged.owl.carousel", function(event) {
    $(slider_section_id).trigger('stop.owl.autoplay');
    $(slider_section_id).trigger('play.owl.autoplay');
    if(JSON.parse(sliderSelector[i].getAttribute('data-slideBy')) > 1){
      slide_item_on_drag(slider_section_id, event.relatedTarget['_drag']['direction'] )
    } 
  });


  $(slider_section_id+'.main_banner_slider').on('changed.owl.carousel', function(event) {
    
    let total_slides = $(this).find('.owl-dots button').length;
    $(this).find('.owl-dots button').each(function(index){
      if($(this).hasClass('active')){
        $(this).find('span').html(index + 1 + '/'+total_slides);
      }else{
        $(this).find('span').html();
      }
    })
    
    if(event.item.index == event.item.count - 1){
      var $carousel = $(slider_section_id);
      var owl = $carousel.data('owlCarousel');
      /* owl.init({ rtl: true }); */
      
      let slide_change_time = JSON.parse(sliderSelector[i].getAttribute('data-autoplay-timeout')) - 10;
      setInterval(function () {
        $(slider_section_id+'.main_banner_slider').trigger('owl.jumpTo', 3)
      }, slide_change_time);
    }
  });

  function reverseSlide(){
    let slide_change_time = JSON.parse(sliderSelector[i].getAttribute('data-autoplay-timeout')) - 10;
    setInterval(function () {
      $(slider_section_id+'.main_banner_slider .owl-dots button.active').prev().click();
    }, slide_change_time);
  }

  function slide_item_on_drag(section_id, drag_direction) {
    if( drag_direction == 'right' ){// $(section_id + ' .owl-dots .owl-dot.active').prev().click();
    }
    else if( drag_direction == 'left' ){$(section_id + ' .owl-dots .owl-dot.active').next().click();} } 
  function startProgressBar() {
    
    /* Code for showing number on active dot */

    let total_count = $('.main_banner_slider .owl-dots button').length;
    $('.main_banner_slider .owl-dots button').each(function(index){
      if($(this).hasClass('active')){
        $(this).find('span').html(index + 1 + '/'+total_count);
      }else{
        $(this).find('span').html();
      }
    })

    /* Code for progress bar */
    $(".slide-progress").css({width: "100%",transition: "width 5000ms"});
  
  }
  function resetProgressBar() {$(".slide-progress").css({width: 0,transition: "width 0s"});}
  function openVideoPopup(url){
    if(url != ''){
      jQuery('.banner_video_modal .video_container iframe').attr('src', url);
      jQuery(".banner_video_modal").modal('show');
    }else{
      return false;
    }
  }
}

 
Shopify.homepageLazyload = function(){
  $('.explore_now_slider').owlCarousel({
    loop: true,
    responsiveClass: true,
    autoplay:true,
    items: 6,
    nav: false,
    dots: false,
    responsive: {
      300: {
        items: 2.3,
        margin: 10
      },
      600: {
        items: 5.2,
        margin: 10
      },
      1000: {
        items: 6,
        loop: true,
        margin: 10
      }
    }
  })

// Explore our slide section
var explore_now_slider_img = document.querySelectorAll('.explore_now_slider .explore_item');
explore_now_slider_img.forEach((slide, i) => {
    slide.addEventListener('click', function() {
      
        let imageurl = slide.querySelector('a').href;
        let imageTitle = slide.querySelector('img').alt;
        clevertap.event.push("Explore now clicked", {
          "image url": imageurl,
          "image Title": imageTitle,
          "userSource": userSource
        })
    })
  });

// Press section
    $('.custom_press_slider').owlCarousel({
      loop: true,
      responsiveClass: true,
      autoplay: true,
      items: 1,
      slideBy: 1,
      nav: false,
      dots: true
    });

  $('.shopify-section shopify-section--press').on('click', function() {
    clevertap.event.push("In the Press section clicked", {"userSource": userSource});
  });
  $("button.press-list__logo-item.tap-area").hover(function() {
    $(this).trigger("click")
  });
  labelsPriority()
}

function labelsPriority() {
  $('.product-item').each(function() {
      if($(this).find('.z-10').length > 0) {
          $(this).find('.z-10').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-9').length > 0) {
          $(this).find('.z-9').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-8').length > 0) {
          $(this).find('.z-8').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-7').length > 0) {
          $(this).find('.z-7').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-6').length > 0) {
          $(this).find('.z-6').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-5').length > 0) {
          $(this).find('.z-5').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-4').length > 0) {
          $(this).find('.z-4').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-3').length > 0) {
          $(this).find('.z-3').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } else if($(this).find('.z-2').length > 0) {
          $(this).find('.z-2').css({
            'display': 'flex',
            'alignItems': 'center'
          });
      } 
  })
}
window.addEventListener('load', labelsPriority)

// Creating cleverTap push event
function createCleverTapEvent( event_name, event_data ){
  if( event_name != '' && event_data != '' ){
    clevertap.event.push( event_name, event_data );
    console.log(clevertap.getCleverTapID());
  }
}

// Creating cleverTap login event
function createCleverTapLoginEvent( event_name, event_data ){
  if( event_name != '' && event_data != '' ){
    clevertap.onUserLogin.push( event_name, event_data );
  }
}

// Strip HTML tags from string
function stripHtml(html){
   var tmp = document.createElement("DIV");
   tmp.innerHTML = html;
   return tmp.textContent || tmp.innerText || "";
}

/* clevertap code for login customer starts here */

$("#customer_login").submit(function(){
  var event = 'Login';
  var userEmail = document.getElementById("customer[email]").value;
  var event_info = { "Email": userEmail };
  var event_login = "Site";

  createCleverTapEvent( event, event_info );
  createCleverTapLoginEvent(event_login, event_info);
});

/* clevertap code for login customer ends here */

/* Clevertap code for announcement bar starts here */

$('.announce .announcement-bar__message p').each(function (ind, el) {
  $(el).on('click', function (e) {
    var announcementText = $(this).text();
    
    var event = 'Announcement bar clicked';
    var event_info = { "Message": announcementText, "userSource": userSource };

    createCleverTapEvent( event, event_info );
  });
});

/* Clevertap code for announcement bar ends here */


/* Clevertap code for Bootstrap carousel homepage starts here */

const slides = document.querySelectorAll('.carousel-inner .carousel--item');
slides.forEach((slide, i) => {
  slide.addEventListener('click', function() {
      let imageTitle = slide.querySelector('.image_alt').innerText;
      let slideNum = `${i+1}`
      
      var event = 'Homepage Banner clicked';
      var event_info = { "Banner Number": "Banner " + slideNum, "Banner Title": imageTitle, "userSource": userSource };

      createCleverTapEvent( event, event_info );
  })
});

/* Clevertap code for Bootstrap carousel homepage ends here */

/* Clevertap Code for "shop by category and top collections on colletion page" starts here  */

$('.top-collections.top-2 .collection-block').each(function () {
  $(this).click(function () {
    var item = $(this).find('.collection').attr('data-item');

    var event = "Top Collections Clicked";

    var event_info = { "Item": stripHtml(item), "userSource": userSource };

    createCleverTapEvent( event, event_info );
  });
});


/* Clevertap Code for "shop by category and top collections on colletion page" ends here  */

/* clevertap code for "image_carousel.liquid" section starts here */

  var image_slides = document.querySelectorAll('.deal-slider .slide-url');
  image_slides.forEach((slide, i) => {
    slide.addEventListener('click', function(e) {
      var imageurl = slide.href;
      var imageTitle = slide.querySelector('img').alt;
      var event = "image_carousel clicked";
      var event_info = { "image url": imageurl, "image Title": imageTitle, "userSource": userSource };
      createCleverTapEvent( event, event_info );
    })
  });

/* clevertap code for "image_carousel.liquid" section ends here */

/* clevertap code for Explore now section on homepage starts here */

  var explore_now_slider_img = document.querySelectorAll('.explore_now_slider .explore_item .explore_now_btn_link');
  explore_now_slider_img.forEach((explore_now_slide, i) => {
    explore_now_slide.addEventListener('click', function(e) {
      var imageurl = explore_now_slide.href;
      var imageTitle = explore_now_slide.querySelector('img').alt;
      var event = "Explore now clicked";
      var event_info = { "image url": imageurl, "image Title": imageTitle, "userSource": userSource };
      createCleverTapEvent( event, event_info );
    })
  });

/* clevertap code for Explore now section on homepage ends here */

/* Clevertap code starts for homepage-collection-banner.liquid */

  let collection_slides = document.querySelectorAll('.collection-banners .carousel-inner .carousel-item');
  collection_slides.forEach((slide, i) => {
    slide.addEventListener('click', function() {
      const slideNum = `${i+1}`;
      let imageTitle = slide.querySelector('.collection-banners .image_alt').innerText;
      
      var event = "Deals Banner clicked";
      var event_info = { "Banner Number": 'Banner ' + slideNum, "Banner Title": imageTitle, "userSource": userSource };
      createCleverTapEvent( event, event_info );
    })
  });

/* Clevertap code ends for homepage-collection-banner.liquid */

/* clevertap code for Featuerd blogs on homepage starts here */

$('.article-list').on('click', function() {
    var event = "Homepage Blog section clicked";
    var event_info = { "userSource": userSource };
    createCleverTapEvent( event, event_info );
});

/* clevertap code for Featuerd blogs on homepage ends here */

/* clevertap code for Press on homepage starts here */

  $('.shopify-section shopify-section--press').on('click', function() {
    var event = "In the Press section clicked";
    var event_info = { "userSource": userSource };
    createCleverTapEvent( event, event_info );
  });

/* clevertap code for Press on homepage ends here */

/* clevertap code for login customer starts here */

$("#customer_login").submit(function(){
  var event = 'Login';
  var userEmail = document.getElementById("customer[email]").value;
  var event_info = { "Email": userEmail };
  var event_login = "Site";

  createCleverTapEvent( event, event_info );
  createCleverTapLoginEvent(event_login, event_info);
});

/* clevertap code for login customer ends here */

/* clevertap code for customer registeration starts here */

$("#register-customer").submit(function(){
  var firstName = document.getElementById("customer[first_name]").value;
  var lastName = document.getElementById("customer[last_name]").value;
  var userEmail = document.getElementById("customer[email]").value;
  var event_login = "Site";
  var event = 'Sign Up';
  var event_info = { "Email": userEmail, "First Name": firstName, "Last Name": lastName };

  createCleverTapLoginEvent(event_login, event_info);
  createCleverTapEvent( event, event_info );
});

/* clevertap code for customer registeration ends here */

/* clevertap code for clicking razor pay starts here */
$(".razorpay-checkout").click(function () {
  var mini_Cart_data = document.querySelector("#mini-cart-form");
  var productsincart = mini_Cart_data.dataset.cart_items;
  var event = 'razor/magic Button Clicked';
  var event_info = { "cart products": productsincart, "Amount": cart_total_price };

  createCleverTapEvent( event, event_info );
});

/* clevertap code for product-banners on pdp*/

$('a.banner_link').on('click', function() {
  let product_b_title = $(this).data('title');
  var event = `product page banner clicked`;
  var event_info = { "userSource": userSource, "product_title": product_b_title };
  createCleverTapEvent( event, event_info );
});

/* clevertap code for clicking razor pay ends here */

// OTP Login

  //Function to allow only numbers
     function _isNumberCheck(evt) {
      var charCode = (evt.which) ? evt.which : event.keyCode
      if (charCode > 31 && (charCode < 48 || charCode > 57))
      return false;
      return true;
   }
   // Not allow 0 as first digit on input
   $(document).on("input", "#otp-mobile-number", (e) => {
      $(e.target).val($(e.target).val().replace(/^[^1-9][^0-9]*$/, ''));
   })
   $(document).on("keypress", "#otp-mobile-number", (e) => {
      return _isNumberCheck(e);
   })
   let timerOn = false;
   function timer(remaining, timerOn) {
    let m = Math.floor(remaining / 60);
    let s = remaining % 60;

    m = m < 10 ? '0' + m : m;
    s = s < 10 ? '0' + s : s;
    $('#timer').html(m + ':' + s);
    remaining -= 1;
    if(remaining >= 0 && timerOn) {
      setTimeout(function() {
        timerOn = sessionStorage.getItem('timerOn');
        timerOn = JSON.parse(timerOn);
          timer(remaining, timerOn);
      }, 1000);
      return;
    }

    if(!timerOn) {
      // Do validate stuff here
      return;
    }

    // Do timeout stuff here
    $('.resend-timer').hide();
    $('.resend-text').show();
    $('.resend-btn').show();
    $('.otp-login-confirm-btn').css('background','#ED1C24');
  }

   function TimerFunction(){
    timerOn = true;
    sessionStorage.setItem('timerOn', timerOn);
    $('.resend-timer').show();
    $('.resend-text').hide();
    $('.resend-btn').hide();
    $('.otp-login-confirm-btn').removeAttr('style');
    timer(60, timerOn);
   }

   function countdown(timeleft, url){
    var timeleft = timeleft;
    var downloadTimer = setInterval(function(){
      if(timeleft <= 0){
        clearInterval(downloadTimer);
        sessionStorage.setItem('login','false');
        location.href = url;
      } else {
        document.getElementById("countdown").innerHTML = timeleft;
      }
      timeleft -= 1;
    }, 1000);
   }

   function emailMask(email) {
    var maskedEmail = email.replace(/([^@\.])/g, "*").split('');
    var previous	= "";
    for(i=0;i<maskedEmail.length;i++){
      if (i<=1 || previous == "." || previous == "@"){
        maskedEmail[i] = email[i];
      }
      previous = email[i];
    }
    return maskedEmail.join('');
  }

  var customer_container = document.querySelector('.customer-login-section.customer--section');
  function inputSubmit(input) {
    if(input){
    input.addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        event.preventDefault();
        // debugger
        if(customer_container.hasAttribute('otp_login_screen')){
          console.log('otp_login_screen');
        document.querySelector('.otp-login-btn').click();
        }
        else if(customer_container.hasAttribute('otp_send')){
          document.querySelector('.otp-login-confirm-btn').click();  
        }
        else{
          console.log('prevint defaunt reload');
          event.preventDefault();
        }
      }
    });
  }
    }

  function signup_window(session_id){
    $('.customer-login-section').attr('new_customer', 'true');
    $('.customer-login-section').removeAttr('multi_email');
    $('.otp-login-message h3').html('Continue with Email');
    $('.otp-timer-container').hide();
    $('.otp-login-error').html('');
    $('.otp-login-submit-btn').click(function(){
      let full_name = $('.otp-fullName #full_name').val();
      let email = $('.otp-email #email').val();
      let phone = $('#otp-mobile-number').val();
      let register_url = sessionStorage.getItem('login_location');
      sessionStorage.setItem('selected_email',email);
      otpSignUp(full_name, email, phone, session_id, register_url);
    })
  }

  function verifyemail(session_id, otp, url){
    let base_Url = 'https://otp.boat-lifestyle.com/email/verify';
    var settings = {
      "url": base_Url,
      "method": "POST",
      "timeout": 0,
      "headers": {
        "Content-Type": "application/json"
      },
      "data": JSON.stringify({
        "session_id": session_id,
        "url": url,
        "otp": otp
      }),
    };
    
    $.ajax(settings).done(function (response) {
      // console.log(response);
      if(response.code == 200 && response.message == 'login URL sent'){
        $('.customer-login-section.customer--section').hide();
        $('.oto-login-success-container').show();
        localStorage.setItem('boatHead_input', response.Token);
        countdown(5, response.URL);
        
      }else if(response.code == 422 && response.message == 'validation_error'){
        $('.otp-login-error').html('Something went wrong please try again.');
      }else if(response.code == 401){
        $('.otp-login-error').html(response.message);
      }else if(response.code == 406){
        $('.otp-login-error').html('Otp expired.');
      }else{
        $('.otp-login-error').html('Something went wrong please try again.');
      }
    });
  }
  
  function emailResend(email, session_id){
    let base_Url = 'https://otp.boat-lifestyle.com/email/otp';
    var settings = {
      "url": base_Url,
      "method": "POST",
      "timeout": 0,
      "headers": {
        "Content-Type": "application/json"
      },
      "data": JSON.stringify({
        "email": email,
        "session_id": session_id
      }),
    };
    
    $.ajax(settings).done(function (response) {
      // console.log(response);
      if(response.code == 200){
        
      }else{
        $('.otp-login-error').html('Something went wrong please try again.');
      }
    });
  }

  function selectEmail(email, session_id, url){
    let base_Url = 'https://otp.boat-lifestyle.com/emails/select';
    var settings = {
      "url": base_Url,
      "method": "POST",
      "timeout": 0,
      "headers": {
        "Content-Type": "application/json"
      },
      "data": JSON.stringify({
        "session_id": session_id,
        "email" : email,
        "url": url
      }),
    };
    $.ajax(settings).done(function (response) {
      // console.log(response);
      if(response.code == 200){
        $('.otp-login-error').html('');
        if(response.message == 'Email exists with different number  , OTP sent to email'){
          var session_id = response.session_id;
  
  // email varify code
  $('.customer-login-section').attr('otp_send', 'true');
  $('.customer-login-section').attr('otp_email_varify', 'true');
  $('.customer-login-section').removeAttr('multi_email');
  $('#resend__otp').removeClass('login-resend-btn');
  $('#resend__otp').addClass('email-resend-btn');
  $('.email-list-container').html('');
  $('.mobile-otp-inout input').val('');
  $('.otp-timer-container').show();
$('.mobile-login-input').html(`
<div class="input">
  <input type="textl" id="emailId" name="emailId" value="${sessionStorage.getItem('selected_email')}" class="input__field is-filled" required="" disabled="disabled">
  <label for="mobile" class="input__label">Enter your email</label>
</div>
`);
$('.otp-login-error').html('');
$('.otp-login-confirm-btn').addClass('email_varify');
TimerFunction();
  sessionStorage.setItem('login_session_id', response.session_id );
  
          }else{
        $('.customer-login-section.customer--section').hide();
        $('.oto-login-success-container').show();
        localStorage.setItem('boatHead_input', response.Token);
        countdown(5, response.URL);
          }
      }else if(response.code == 422 && response.message == 'validation_error'){
        // $('.otp-login-error').html('Something went wrong please try again.');
      }else if(response.code == 401 || response.code == 404 ){
        $('.otp-login-error').html(response.message);
      }
    });
  }

  function otpSignUp(full_name, email, phone, session_id, url){
    let base_Url = 'https://otp.boat-lifestyle.com/signup';
    var settings = {
      "url": base_Url,
      "method": "POST",
      "timeout": 0,
      "headers": {
        "Content-Type": "application/json"
      },
      "data": JSON.stringify({
        "full_name" : full_name,
        "email": email,
        "phone": phone,
        "session_id": session_id,
        "url" : url
      }),
    };
    $.ajax(settings).done(function (response) {
      // console.log(response);
      if(response.code == 200){
        $('.otp-login-error').html('');
        if(response.message == 'Email exists with different number  , OTP sent to email'){
        var session_id = response.session_id;

// email varify code

  $('.customer-login-section').attr('otp_send', 'true');
  $('.customer-login-section').attr('otp_email_varify', 'true');
  $('.customer-login-section').removeAttr('new_customer');
  $('.customer-login-section').removeAttr('multi_email');
  $('#resend__otp').removeClass('login-resend-btn');
  $('#resend__otp').addClass('email-resend-btn');
  $('.email-list-container').html('');
  $('.mobile-otp-inout input').val('');
  $('.otp-timer-container').show();
$('.mobile-login-input').html(`
<div class="input">
  <input type="textl" id="emailId" name="emailId" value="${sessionStorage.getItem('selected_email')}" class="input__field is-filled" required="" disabled="disabled">
  <label for="mobile" class="input__label">Enter your email</label>
</div>
`);
$('.otp-login-error').html('');
$('.otp-login-confirm-btn').addClass('email_varify');
TimerFunction();
  sessionStorage.setItem('login_session_id', response.session_id );
        }else{
        $('.customer-login-section.customer--section').hide();
        $('.oto-login-success-container').show();
        localStorage.setItem('boatHead_input', response.Token);
        countdown(5, response.URL);
      }
      }else if(response.code == 422 && response.message == 'validation_error'){
        $('.otp-login-error').html('Something went wrong please try again.');
      }else if(response.code == 401){
        $('.otp-login-error').html('Customer already exist with this email ID and with ' + response.message + ' phone number login with this number.');
        let login_btn = $('.otp-login-submit-btn');
        login_btn.html('Back to Login');
        login_btn.attr('return_to_login', true);
        $('.otp-login-submit-btn[return_to_login]').click(function(e){
          e.preventDefault();
          location.reload();
        })
      }
    });
  }
  
function verifyotp(session_id, otp, url){
  let base_Url = 'https://otp.boat-lifestyle.com/login/verifyotp';
  var settings = {
    "url": base_Url,
    "method": "POST",
    "timeout": 0,
    "headers": {
      "Content-Type": "application/json"
    },
    "data": JSON.stringify({
      "session_id": session_id,
      "otp": otp,
      "url": url
    }),
  };
  
  $.ajax(settings).done(function (response) {
    // console.log(response);
    sessionStorage.setItem('timerOn', false);
    console.log(timerOn,'timerOn');
    if(response.code == 200 && response.message == 'login URL sent'){
      $('.customer-login-section.customer--section').hide();
      $('.oto-login-success-container').show();
      localStorage.setItem('boatHead_input', response.Token);
      countdown(5, response.URL);
      
    }else if(response.code == 422 && response.message == 'validation_error'){
      $('.otp-login-error').html('Something went wrong please try again.');
    }else if(response.code == 401 && response.message == 'Incorrect Otp'){
      $('.otp-login-error').html(response.message);
    }else if(response.code == 401 && response.message == 'Customer does not exists , consider Sign up'){
      $('.otp-login-error').html(response.message);
      signup_window(session_id);
    }else if(response.code == 406){
      $('.otp-login-error').html('Otp expired.');
    }else if(response.code == 300 && response.message == 'emailId list'){
      $('.otp-login-message h3').html('Please select your Primary email id');
      $('.customer-login-section').attr('multi_email', 'true');
      $('.otp-timer-container').hide();
      $('.otp-login-error').html('');
      let emailList = response.emailList;
      let emailListHtml = '', i ;
      let emailListContainer = document.querySelector('.email-list-container');
      if(emailList.length > 0){
      for (let i = 0; i < emailList.length; i++) {
        emailListHtml = emailListHtml + '<span data-value="'+ emailList[i] +'">'+ emailMask(emailList[i]) +'</span>'
      }
      emailListContainer.innerHTML = emailListHtml + '<span class="redirect_to_signup">Continue with Email</span>';
      let emailSelector = $('.email-list-container span');
      let selectedEmail = '';
      console.dir(emailSelector[0]);
      selectedEmail = emailSelector[0].dataset.value;
      sessionStorage.setItem('selected_email', selectedEmail);
      console.log(selectedEmail);
      emailSelector[0].setAttribute('selected','true');
      emailSelector.click(function(event){
      selectedEmail = event.target.dataset.value;
      for (i = 0; i < emailSelector.length; i++) {
        if (emailSelector[i].hasAttribute("selected")) {
          emailSelector[i].removeAttribute("selected");   
        }
    }
    sessionStorage.setItem('selected_email', selectedEmail);
      $(this).attr('selected','true'); 
      });

      $('.redirect_to_signup').click(function(){
        signup_window(session_id);
      });
      let selectedEmail_url = sessionStorage.getItem('login_location');
      $('.customer-login-section[multi_email] .otp-login-submit-btn').click(function(){
      selectEmail(selectedEmail, session_id, selectedEmail_url);
      });
    }else{
      signup_window(session_id);
    }
    }else{
      $('.otp-login-error').html('Something went wrong please try again.');
    }
  });
}

function otpLogin(phone){
  let base_Url = 'https://otp.boat-lifestyle.com/login/sendotp';
  var settings = {
    "url": base_Url,
    "method": "POST",
    "timeout": 0,
    "headers": {
      "Content-Type": "application/json"
    },
    "data": JSON.stringify({
      "phone": phone
    }),
  };
  $.ajax(settings).done(function (response) {
    // console.log(response);
    if(response.code == 200 && response.message == 'OTP sent'){
    $('.customer-login-section').attr('otp_send', 'true');
    $('.customer-login-section').removeAttr('otp_login_screen');
    $('#otp-mobile-number').attr('disabled', true)
    $('.otp-login-error').html('');
    TimerFunction();
      sessionStorage.setItem('login_session_id', response.session_id )
  }else if(response.code == 422 && response.message == 'validation_error'){
  $('.otp-login-error').html('The phone field is required.');
  }else if(response.code == 403 && response.message == 'Invalid phone number'){
    $('.otp-login-error').html(response.message);
  }
  });
}

$('.otp-login-btn, .login-resend-btn').click(function(){
  if(!$('#resend__otp').hasClass('email-resend-btn')){
  console.log('login-resend-btn');
  let phone = $('#otp-mobile-number').val();
  otpLogin(phone);
  }
})

$(document).on('click', '#resend__otp', function(){
  TimerFunction();
});

$( "#otp" ).on( "input", function() {
  if($(this).val().length >5 ){
    $('.otp-login-confirm-btn').css('background','#ED1C24');
  }
});

$('.mobile-login-edit-icon').click(function(){
  $('.otp-login-error').html('');
  $('.customer--section').removeAttr('otp_send');
  $('#otp-mobile-number').attr('disabled', false)
  });
  if(!sessionStorage.login_location && sessionStorage.login_location !== ''){
    sessionStorage.setItem('login_location','https://www.boat-lifestyle.com/');
  }
  

  document.querySelector('.custom-account-icon').addEventListener("click", function myFunction(event) {
    event.preventDefault();
      sessionStorage.setItem('login_location',window.location.href);
  });

  let mobile_account = document.querySelectorAll('.mobile-custom-account-icon');
  for (let i = 0; i < mobile_account.length; i++) {
    mobile_account[i].addEventListener("click", function myFunction(event) {
      event.preventDefault();
        sessionStorage.setItem('login_location',window.location.href);
        window.location = '/account';
    });
  }

 $('.otp-login-confirm-btn').click(function(){
   if(!$('.otp-login-confirm-btn').hasClass('email_varify')){
  console.log('verifyotp');
  let session_id = sessionStorage.getItem('login_session_id');
  let otp = $('.mobile-otp-inout input').val();
  let url = sessionStorage.getItem('login_location');
if(session_id && session_id !== '' && session_id !== 'undefined' && url && otp !== ''){   
  verifyotp(session_id, otp, url);
}
     }else{
  let session_id = sessionStorage.getItem('login_session_id');
  let otp = $('.mobile-otp-inout input').val();
  let url = sessionStorage.getItem('login_location');
if(session_id && session_id !== '' && session_id !== 'undefined' && url && otp !== ''){   
  verifyemail(session_id, otp, url);
}else if(otp == ''){
  $('.otp-login-error').html('OTP is required');
}   
     }
})

$('#resend__otp').click(function(){
  if($(this).hasClass('email-resend-btn')){
  console.log('email-resend-btn');
  let session_id = sessionStorage.getItem('login_session_id');
  let email = $('#emailId').val();
if(session_id && session_id !== '' && session_id !== 'undefined' && email){   
  emailResend(email, session_id);
}  
  }
})

var input_login = document.querySelector('.mobile-login-input input');
inputSubmit(input_login);  
var otp_login = document.querySelector('.mobile-otp-inout input');
inputSubmit(otp_login);  

$('.mobile-otp-inout').click(function(){
  if($('.otp-login-error').html() !== ''){
    $('.otp-login-error').html('');
    $(this).children('input').val('');
  }
});

// if( window.location = '/account/logout'){
//   localStorage.removeItem('boatHead_input');
//   sessionStorage.removeItem('login')
// }
  // if ('OTPCredential' in window) {
  //   window.addEventListener('DOMContentLoaded', (e) => {
      
  //     const input = document.querySelector('input[autocomplete="one-time-code"]');
  //     if (!input) return;
  //     const ac = new AbortController();
  //     const form = input.closest('form');
  //     if (form) {
  //       form.addEventListener('submit', (e) => {
  //         ac.abort();
  //       });
  //     }
  //     // alert('Hii 1 otp');
  //     navigator.credentials.get({
  //       otp: { transport:['sms'] },
  //       signal: ac.signal
  //     }).then((otp) => {
  //       alert('otp');
  //       alert(otp);
  //       input.value = otp.code;
        
  //       // if (form) form.submit();
  //     }).catch((err) => {
  //       console.error(err);
  //     });
  //   });
  // }
  
$(document).on("click", ".custom-offer-add-to-cart", function(e) {
  e.preventDefault();
  let offerForm = $(this).parents("form")[0];
  let offerId = offerForm.querySelector('[name="id"]').value;
  let offerVariantData = sessionStorage.getItem('variantQtys');
  let OfferProperty= [];
  let varient_pod_units = [];
  let podData = {};
  offerVariantData = JSON.parse(offerVariantData);
    for (var key in offerVariantData) {
     if (offerVariantData.hasOwnProperty(offerId)) {
      let OfferPropertyArr = offerVariantData[offerId];
       OfferProperty.push(OfferPropertyArr[0]['pod_deal_applicability']);
       varient_pod_units.push(OfferPropertyArr[0]['pod_units']);
       break;
      }
    }
  let varient_pod_unit = varient_pod_units[0];
  varient_pod_unit = parseInt(varient_pod_unit);
  OfferProperty = OfferProperty[0];
  if(varient_pod_unit > 0){
   podData = {'quantity': 1,'id': offerId,'properties': {'_POD': OfferProperty }}
  }else{
   podData = {'quantity': 1,'id': offerId} 
  }
    if($(this).hasClass( "algolia_pod_offer" )){
      $.ajax({
        url: "/cart/add.js",
        dataType: "json",
        cache: !1,
        type: "post",
        data: podData,
        success: function(e) {
            document.documentElement.dispatchEvent(new CustomEvent("cart:refresh", {
                bubbles: !0
            }));
            setTimeout(function() {
              $(".header__cart-count").html($("#mini-cart input.cart--count").val())
          }, 1500)
            // console.log('hiii');
            document.getElementById("mini-cart").open = !0, document.querySelector("body").classList.add("noScroll"), $(".search-clear-icon").css('display', 'flex')
        }
    })
    }else{
      $.ajax({
        url: "/cart/add.js",
        dataType: "json",
        cache: !1,
        type: "post",
        data: podData,
        success: function(e) {
            document.documentElement.dispatchEvent(new CustomEvent("cart:refresh", {
                bubbles: !0
            }));
            setTimeout(function() {
              $(".header__cart-count").html($("#mini-cart input.cart--count").val())
          }, 1500)
        }
    })
    }
});
